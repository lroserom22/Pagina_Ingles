<!DOCTYPE html>
<html>
<head>
    <title>Palabras en Español</title>
</head>
<body>
    <h1>Palabras en Español</h1>
    <h2>Agregar Palabra</h2>
    <input type="text" id="spanishWord" placeholder="Palabra en Español">
    <input type="text" id="englishWord" placeholder="Escritura en Inglés">
    <input type="text" id="pronunciation" placeholder="Pronunciación">
    <button onclick="agregarPalabra()">Agregar</button>

    <h2>Lista de Palabras</h2>
    <ul id="wordList"></ul>

    <h2>Examen</h2>
    <button onclick="empezarExamen()">Comenzar Examen</button>
    <div id="examenResult" style="display: none;">
        <p>Palabra: <span id="examenWord"></span></p>
        <button onclick="mostrarPronunciacionEscritura()">Mostrar</button>
        <p id="examenEnglish" style="display: none;"></p>
        <p id="examenPronunciation" style="display: none;"></p>
    </div>

    <script>
        function agregarPalabra() {
            const spanishWord = document.getElementById("spanishWord").value;
            const englishWord = document.getElementById("englishWord").value;
            const pronunciation = document.getElementById("pronunciation").value;
            if (spanishWord && englishWord && pronunciation) {
                const wordList = document.getElementById("wordList");
                const listItem = document.createElement("li");
                listItem.innerHTML = `${spanishWord} - ${englishWord} - ${pronunciation} 
                    <button onclick="editarPalabra(this)">Editar</button>
                    <button onclick="eliminarPalabra(this)">Eliminar</button>`;
                wordList.appendChild(listItem);
                // Guardar en almacenamiento local
                guardarPalabra(spanishWord, englishWord, pronunciation);
                // Limpiar campos de entrada
                document.getElementById("spanishWord").value = "";
                document.getElementById("englishWord").value = "";
                document.getElementById("pronunciation").value = "";
            }
        }

        function guardarPalabra(spanishWord, englishWord, pronunciation) {
            let storedWords = JSON.parse(localStorage.getItem("words")) || [];
            storedWords.push({ spanish: spanishWord, english: englishWord, pronunciation: pronunciation });
            localStorage.setItem("words", JSON.stringify(storedWords));
        }

        function editarPalabra(button) {
            const listItem = button.parentNode;
            const words = listItem.innerText.split(" - ");
            const spanishWord = words[0];
            const englishWord = words[1];
            const pronunciation = words[2];
            document.getElementById("spanishWord").value = spanishWord;
            document.getElementById("englishWord").value = englishWord;
            document.getElementById("pronunciation").value = pronunciation;
            listItem.remove();
            guardarCambios();
        }

        function eliminarPalabra(button) {
            const listItem = button.parentNode;
            const words = listItem.innerText.split(" - ");
            const spanishWord = words[0];
            const storedWords = JSON.parse(localStorage.getItem("words")) || [];
            const updatedWords = storedWords.filter(word => word.spanish !== spanishWord);
            localStorage.setItem("words", JSON.stringify(updatedWords));
            listItem.remove();
        }

        function empezarExamen() {
            const storedWords = JSON.parse(localStorage.getItem("words")) || [];
            if (storedWords.length === 0) {
                alert("No hay palabras en la lista.");
                return;
            }
            const randomIndex = Math.floor(Math.random() * storedWords.length);
            const word = storedWords[randomIndex];
            const examenResult = document.getElementById("examenResult");
            const examenWord = document.getElementById("examenWord");
            const examenEnglish = document.getElementById("examenEnglish");
            const examenPronunciation = document.getElementById("examenPronunciation");
            
            examenWord.textContent = word.spanish;
            examenEnglish.style.display = "none";
            examenPronunciation.style.display = "none";
            
            examenResult.style.display = "block";
        }

        function mostrarPronunciacionEscritura() {
            const examenEnglish = document.getElementById("examenEnglish");
            const examenPronunciation = document.getElementById("examenPronunciation");
            examenEnglish.textContent = "Escritura en Inglés: " + word.english;
            examenPronunciation.textContent = "Pronunciación: " + word.pronunciation;
            
            examenEnglish.style.display = "block";
            examenPronunciation.style.display = "block";
        }

        function guardarCambios() {
            const spanishWords = Array.from(document.querySelectorAll("#wordList li")).map(item => {
                const words = item.innerText.split(" - ");
                return {
                    spanish: words[0],
                    english: words[1],
                    pronunciation: words[2],
                };
            });
            localStorage.setItem("words", JSON.stringify(spanishWords));
        }

        // Cargar palabras al abrir la página
        window.onload = function() {
            const storedWords = JSON.parse(localStorage.getItem("words")) || [];
            const wordList = document.getElementById("wordList");
            storedWords.forEach(word => {
                const listItem = document.createElement("li");
                listItem.innerHTML = `${word.spanish} - ${word.english} - ${word.pronunciation} 
                    <button onclick="editarPalabra(this)">Editar</button>
                    <button onclick="eliminarPalabra(this)">Eliminar</button>`;
                wordList.appendChild(listItem);
            });
        };
    </script>
</body>
</html>
